# ==========================================================
# ? APP CONFIG
# ==========================================================
spring.application.name=seminar-booking

# MongoDB connection ? use internal Docker network hostname "mongodb"
spring.data.mongodb.uri=${MONGODB_URI:mongodb://mongodb:27017/Seminar_Booking}
spring.data.mongodb.database=${MONGODB_DATABASE:Seminar_Booking}

# Port for backend API (8080 inside Docker)
server.port=${PORT:8080}

# ==========================================================
# ?? SERVER PERFORMANCE
# ==========================================================
server.tomcat.connection-timeout=60s
spring.mvc.async.request-timeout=60000
server.tomcat.max-threads=200
server.tomcat.accept-count=100

# ==========================================================
# ? CORS / FRONTEND
# ==========================================================
# In Docker, your frontend runs on http://localhost:3000
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://195.35.6.235:3000/}

# ==========================================================
# ? MAIL CONFIG
# ==========================================================
spring.mail.host=${MAIL_HOST:smtp-relay.brevo.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.protocol=smtp
spring.mail.default-encoding=UTF-8
spring.mail.properties.mail.smtp.auth=${MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_SMTP_STARTTLS:true}
spring.mail.properties.mail.smtp.ssl.trust=*

# Timeout settings (prevent hanging emails)
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000

# Custom app-level metadata
app.mail.from=${APP_MAIL_FROM:imsingle8688@gmail.com}
app.mail.owner=${APP_MAIL_OWNER:KURAPARTHI MAHESWAR REDDY}
app.mail.company=${APP_MAIL_COMPANY:DTAO OFFICIAL}
app.mail.website=${APP_MAIL_WEBSITE:https://dtaoofficial.netlify.app/}

# ==========================================================
# ? JWT CONFIG
# ==========================================================
jwt.secret=${JWT_SECRET:default_fallback_secret_key_dont_use_in_prod}
jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}

# ==========================================================
# ? ASYNC / EXECUTOR SETTINGS
# ==========================================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=200
spring.task.execution.pool.keep-alive=60
spring.task.execution.thread-name-prefix=email-exec-

# ==========================================================
# ? LOGGING
# ==========================================================
logging.level.org.springframework.mail=INFO
logging.level.org.springframework.mail.javamail=INFO
logging.level.com.dtao.seminarbooking.service.EmailService=INFO
logging.level.com.dtao.seminarbooking.controller.SeminarController=INFO

# For debugging SMTP (optional):
# logging.level.org.springframework.mail=DEBUG
# logging.level.org.springframework.mail.javamail=DEBUG
# logging.level.javax.mail=DEBUG

# ==========================================================
# ? BREVO HTTP API CONFIG
# ==========================================================
brevo.api.key=${BREVO_API_KEY}
brevo.api.base=${BREVO_API_BASE:https://api.brevo.com/v3}

# ==========================================================
# ? OPTIONAL: HEALTH / DIAGNOSTICS
# ==========================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.health.mongo.enabled=true
