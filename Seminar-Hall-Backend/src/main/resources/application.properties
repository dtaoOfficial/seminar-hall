# ==========================================================
# ? APP CONFIG
# ==========================================================
spring.application.name=seminar-booking

# MongoDB connection (Internal Docker Network)
spring.data.mongodb.uri=${MONGODB_URI:mongodb://mongodb:27017/Seminar_Booking}
spring.data.mongodb.database=${MONGODB_DATABASE:Seminar_Booking}

# Server Port (Internal Docker Port)
server.port=${PORT:8080}

# ==========================================================
# ? SERVER PERFORMANCE
# ==========================================================
server.tomcat.connection-timeout=60s
spring.mvc.async.request-timeout=60000
server.tomcat.max-threads=200
server.tomcat.accept-count=100

# ==========================================================
# ? CORS / FRONTEND
# ==========================================================
# Allow your specific VPS Frontend URL
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://195.35.6.235:3000}

# ==========================================================
# ? MAIL METADATA (Custom)
# ==========================================================
# We use the username as the 'from' address
app.mail.from=${MAIL_USERNAME}

# Sender Name (Venue Booking System)
app.mail.sender-name=${APP_MAIL_SENDER_NAME:Venue Booking System}

# Website Link
app.mail.website=${APP_MAIL_WEBSITE}

# ==========================================================
# ? JWT CONFIG
# ==========================================================
jwt.secret=${JWT_SECRET}
jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}

# ==========================================================
# ? ASYNC / EXECUTOR SETTINGS
# ==========================================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=200
spring.task.execution.pool.keep-alive=60
spring.task.execution.thread-name-prefix=email-exec-

# ==========================================================
# ? LOGGING
# ==========================================================
logging.level.org.springframework.mail=INFO
logging.level.org.springframework.mail.javamail=INFO
logging.level.com.dtao.seminarbooking.service.EmailService=INFO
logging.level.com.dtao.seminarbooking.controller.SeminarController=INFO

# ==========================================================
# ?? HEALTH / DIAGNOSTICS
# ==========================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.health.mongo.enabled=true

# ===============================
# ? SMTP EMAIL CONFIGURATION (Gmail SSL)
# ===============================
spring.mail.host=smtp.gmail.com
spring.mail.port=465

# Credentials pulled strictly from Docker ENV variables
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

# SSL/Auth Settings
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000